#include <iostream>
#include <stdlib.h>
#include <conio.h>
#include <windows.h>

using namespace std;

int main()
{
    enum eDirection{stop=0, uup, ddown, lleft, rright,};
    eDirection direction;
    int frames = 0;
	bool gameover = false;
	char input;
	enum eFacing{up, down, left, right};
	eFacing facing = down;
	int Xpos = 1;
	int Ypos = 1;
	int enXpos = 10;
	int enYpos = 10;
	int Xmax = 20;
	int Ymax = 20;
	while(gameover == false)
	{
		system("cls");
		if(frames%10==0)
        {
            if(enXpos>Xpos)
            {
                enXpos--;
            }
            if(enYpos>Ypos)
            {
                enYpos--;
            }
            if(enXpos<Xpos)
            {
                enXpos++;
            }
            if(enYpos<Ypos)
            {
                enYpos++;
            }

        }
		if(input!='w' || input!='s' || input!='a' || input!='d')
        {
            direction = stop;
        }
		if(input == 'w')
        {
            direction = uup;
        }
        if(input == 'a')
        {
            direction = lleft;
        }
        if(input == 's')
        {
            direction = ddown;
        }
        if(input == 'd')
        {
            direction = rright;
        }
        switch(direction)
        {
        case uup:
            if(Ypos!=1)
            {
                Ypos--;
            }
            facing = up;
            break;
        case ddown:
            if(Ypos!=Ymax-1)
            {
                Ypos++;
            }
            facing = down;
            break;
        case lleft:
            if(Xpos!=1)
            {
                Xpos--;
            }
            facing = left;
            break;
        case rright:
            if(Xpos!=Xmax-1)
            {
                Xpos++;
            }
            facing = right;
        case stop:
            break;
        }
		for(int i = 0; i<=Ymax; i++)
		{
			for(int j=0; j<=Xmax; j++)
			{
			    if(i==Ymax || i==0 || j==Xmax || j==0)
                {
                    cout << "#";
                }
				else
                {
                    if(j==Xpos && i==Ypos)
                    {
                        if(facing==up)
                        {
                            cout << "^";
                        }
                        if(facing==down)
                        {
                            cout << "v";
                        }
                        if(facing==left)
                        {
                            cout << "<";
                        }
                        if(facing==right)
                        {
                            cout << ">";
                        }
                    }
                    else
                    {
                        if(j==enXpos && i==enYpos)
                        {
                            cout << "X";
                        }
                        else
                        {
                            cout << " ";
                        }
                    }
                }
			}
			cout << endl;
		}
		input = '|';
		if(kbhit())
        {
            input = _getch();
        }
        frames++;
        if(frames>1000000)
        {
            frames=0;
        }
        if(Xpos==enXpos && Ypos==enYpos)
        {
            gameover = true;
        }
        cout << frames;
	}
	while(gameover==true)
    {
        system("cls");
        cout << "Game Over \n press any key to try again" << endl;
        if(kbhit())
        {
            main();
        }
    }
}
